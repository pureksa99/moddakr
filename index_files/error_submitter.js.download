//#region src/error_submitter.ts
function sendToParent({ type, message = "", source = "", lineno = 0, colno = 0, error = null }) {
	const errorDetails = {
		type,
		message,
		source,
		lineno,
		colno,
		error
	};
	window.parent.postMessage(errorDetails, "*");
}
window.onerror = function(message, source, lineno, colno, error) {
	let safeMessage = "";
	if (typeof message === "string") safeMessage = message;
	else if (message instanceof Event) safeMessage = "Script error or resource loading failure";
	else safeMessage = String(message);
	sendToParent({
		type: "error",
		message: safeMessage,
		source: source || "",
		lineno: lineno || 0,
		colno: colno || 0,
		error
	});
};
window.onunhandledrejection = function(event) {
	sendToParent({
		type: "error",
		message: event.reason?.message || String(event.reason),
		error: event.reason instanceof Error ? event.reason : null
	});
};

//#endregion
